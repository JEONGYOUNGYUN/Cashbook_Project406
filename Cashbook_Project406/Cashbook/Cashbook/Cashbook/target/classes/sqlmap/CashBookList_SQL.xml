<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace : xml파일은 여러개일 수 있음. 이를 구별하기 위한 식별 용도로 사용 -->
<mapper namespace="com.project.cashbook.mapper.CashBookListMapper">
	
	<!-- 가계부 일일 목록 조회 -->
	<select id="selectCashBookList" resultType="CashbookVO">
		SELECT A.CSBO_CD 													/*가계부코드*/
			, A.CSBO_DT 													/*가계부등록일*/
			, A.CSBO_AMT 													/*가계부금액*/
			, B.CBCT_NM AS CSBO_NM 											/*가계부분류_EX.식비, 교통...*/
			, C.CATE_NM AS CSBO_AST 										/*가계부자산_EX.현금, 카드, 은행...*/
			, A.CSBO_CNT													/*가계부내용*/
			, C.CATE_NM AS CSBO_CATE 										/*가계부카테고리_수입, 지출, 이체...*/
			, D.USER_NIK 													/*사용자닉네임*/
			FROM CASHBOOK A, CASHBOOKCATEGORY B, CATEGORY C, USER_DATA D
			WHERE A.CSBO_NM = B.CBCT_NO
			AND A.CSBO_AST = C.CATE_CD
			AND A.CSBO_CATE = C.CATE_CD
			AND A.USER_CD = D.USER_CD
	</select>
	
	<!-- 가계부 일일 목록 중 수입 합계 조회 -->
	<select id="selectTotalIncome" resultType="int">
		SELECT B.CATE_NM 								/*가계부 카테고리*/
		, SUM(A.CSBO_AMT) AS CATE_TOTAL 				/*가계부 합계*/
		FROM CASHBOOK A, CATEGORY B
		WHERE A.CSBO_CATE = B.CATE_CD
		AND B.CATE_NM = '수입'
		GROUP BY B.CATE_NM
	</select>
	
	<!-- 가계부 일일 목록 중 지출 합계 조회 -->
	<select id="selectTotalExpense" resultType="int">
		SELECT B.CATE_NM 								/*가계부 카테고리*/
		, SUM(A.CSBO_AMT) AS CATE_TOTAL 				/*가계부 합계*/
		FROM CASHBOOK A, CATEGORY B
		WHERE A.CSBO_CATE = B.CATE_CD
		AND B.CATE_NM = '지출'
		GROUP BY B.CATE_NM
	</select>
</mapper>
















